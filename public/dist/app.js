!function(){"use strict";angular.module("jivoxHack",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(o,t,n){t.otherwise("/home");var r="src/";o.state("account",{url:"/user",templateUrl:r+"user/account/account.tpl",controller:"AccountController as account"}).state("account.login",{url:"/user/login",templateUrl:r+"user/account/login/login.tpl",controller:"LoginController as login"}).state("account.signup",{url:"/user/signup",templateUrl:r+"user/account/signup/signup.tpl",controller:"SignUpController as signup"}).state("account.logout",{url:"/user",templateUrl:r+"user/account/account.tpl",controller:"AccountController as account"}).state("profile",{url:"/user/profile",templateUrl:r+"user/profile/profile.tpl",controller:"ProfileController as profile"}).state("wishlist",{url:"/user/wishlist",templateUrl:r+"user/wishlist/wishlist.tpl",controller:"WishlistController as wishlist"}).state("order",{url:"/user/order",templateUrl:r+"user/order/order.tpl",controller:"OrderController as order"}).state("cart",{url:"/user/cart",templateUrl:r+"user/cart/cart.tpl",controller:"CartController as cart"}).state("home",{url:"/home",templateUrl:r+"home/home.tpl",controller:"HomeController as home"}).state("products",{url:"/products/:prodId",templateUrl:r+"products/product.tpl",controller:"ProductController as product"}),n.interceptors.push("authInterceptor")}])}(),function(){angular.module("jivoxHack").factory("authInterceptor",["$rootScope","$q","$window",function(o,t,n){return{request:function(o){return o.headers=o.headers||{},n.localStorage.getItem("token")&&(o.headers.Authorization=n.localStorage.getItem("token")),o},response:function(o){return 401===o.status,o||t.when(o)}}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Category",["$http","$window",function(o,t){return{getCategoryProducts:function(t){return o.get("/products/category/"+t)},getCategories:function(){return o.get("/category/")}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("HomeController",["$state","$http","Home","$window","$stateParams","Category","Wishlist","Cart","$rootScope",function(o,t,n,r,e,c,l,u,s){var i=this;i.catList=null,i.prodlist=[],n.getCategories().then(function(o){console.log(o),i.catList=o.data.catgList}).catch(function(o){console.log("error:",o)}),i.times=function(o){return new Array(o)},i.getCatProd=function(o){c.getCategoryProducts(o).then(function(o){return console.log(o),o.data.products}).catch(function(o){console.log(o)})},i.addToCart=function(o){u.addToCart(o)},i.addToWishlist=function(o){l.postWishes(o).then(function(o){console.log(o)}).catch(function(o){console.log(o)})};for(var a=3;a>=0;a--)c.getCategoryProducts(a).then(function(o){console.log(o);for(var t=0;t<o.data.products.length;t++)i.prodlist.push(o.data.products[t])}).catch(function(o){console.log(o)});i.viewProd=function(t){console.log(t),s.curProdId=t,o.go("products")}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Home",["$http","$window",function(o,t){return{getCategories:function(){return o.get("/category")}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProductController",["$rootScope","$window","$stateParams","Product","Wishlist","Cart",function(o,t,n,r,e,c){var l=this;l.addedToCart=[],l.curProductId=null,l.reviewList=[],l.curProductId=n.prodId;var u=function(){r.getProductDetails(l.curProductId).then(function(o){console.log("details",o),l.productDetails=o.data.products,l.reviewList=o.data.products.ratings,l.pic=o.data.products.photos[0].url,l.vendorId=o.data.products.vendor_id,console.log("re",l.reviewList)}).catch(function(o){console.log(o)})};u(),r.getReview(l.curProductId).then(function(o){console.log("review",o)}).catch(function(o){console.log(o)}),l.addCart=function(){c.addToCart(l.curProductId)},l.addWish=function(){e.postWishes(l.curProductId).then(function(o){console.log(o)}).catch(function(o){console.log(o)})},l.addReview=function(){r.addRating(l.curProductId,{vendor_id:l.vendorId,rating:l.Urating,review:l.Ureview}).then(function(o){u(),console.log(o),l.Ureview="",l.Urating=""}).catch(function(o){console.log(o)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Product",["$http","$window",function(o,t){return{getProductDetails:function(t){return o.get("/products/"+t)},addRating:function(t,n){return o.post("/consumer/ratings/"+t,n)},getReview:function(t){return o.get("/ratings/"+t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("AccountController",["Account","$state","$window","$rootScope",function(o,t,n,r){var e=this;r.loggedIn=o.isLoggedInFunc(),console.log(o.isloggedIn),e.logout=function(){o.logout(),e.loggedin=!1}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Account",["$http","$window",function(o,t){function n(t){return o.post("/users/signup",t)}function r(n){var r=this;return o.post("/users/login",n).then(function(o){return console.log(o),r.isLoggedIn=!0,i=o.data.token,a=o.data.id,t.localStorage.setItem("token",i),t.localStorage.setItem("user_id",a),console.log("isLoggedin",r.isLoggedIn),o}).catch(function(o){console.log(o)})}function e(){return d=!1,t.localStorage.clear()}function c(){return s()&&u()?(console.log("Logged in"),d=!0,!0):(console.log("no logged in"),d=!1,!1)}function l(){return o.get("/users")}function u(){return a=t.localStorage.getItem("user_id")}function s(){return i=t.localStorage.getItem("token")}var i=null,a=null,d=!1;return{signUp:n,login:r,getUserNames:l,getUserId:u,getToken:s,isLoggedIn:this.isLoggedIn,isLoggedInFunc:c,logout:e}}])}(),function(){"use strict";angular.module("jivoxHack").controller("CartController",["$window","Product","$stateParams","Cart","Order",function(o,t,n,r,e){var c=this;c.prodlist=[];var l=r.getCart();console.log("prod id arr",l);var u=[],s=function(o){for(var n=o.length-1;n>=0;n--)t.getProductDetails(o[n]).then(function(o){console.log(o),c.prodlist.push(o.data.products),u.push({product_id:o.data.products.product_id,vendor_id:o.data.products.vendor_id})}).catch(function(o){console.log(o)})};c.order=function(){e.postOrder({orders:u}).then(function(o){console.log(o)}).catch(function(o){console.log(o)})},console.log(c.prodlist),s(l)}])}(),function(){"use strict";angular.module("jivoxHack").factory("Cart",["$http","$window",function(o,t){return{addToCart:function(o){var n=t.localStorage.getItem("cart");n||(n=[]),n.push(o),t.localStorage.setItem("cart",JSON.stringify(n))},getCart:function(){return JSON.parse(t.localStorage.getItem("cart"))}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("OrderController",["Order","$window","$stateParams",function(o,t,n){var r=this;r.allOrders=null,o.getOrders().then(function(o){console.log(o),r.allOrders=o.data.orders}).catch(function(o){console.log(o)})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Order",["$http","$window",function(o,t){return{getOrders:function(){return o.get("/consumer/orders/")},postOrder:function(t){return o.post("/consumer/orders/",t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProfileController",["$http","$window","$stateParam",function(o,t,n){var r=this;r.update=function(){Profile.postAddress(data).then(function(o){console.log(o)}).catch(function(o){console.log(o)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Profile",["$http","$window",function(o,t){return{postAddress:function(t){return o.post("/consumer/address/"+t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("WishlistController",["$http","$window","Wishlist","toaster","Product","Cart",function(o,t,n,r,e,c){function l(o){for(var t=o.length-1;t>=0;t--)e.getProductDetails(o[t].product_id).then(function(o){console.log(o),u.prodlist.push(o.data.products)}).catch(function(o){console.log(o)})}var u=this;u.prodlist=[],u.addToCart=function(o){c.addToCart(o).then(function(o){console.log(o)}).catch(function(o){console.log(o)})},n.getWishes().then(function(o){console.log(o),u.wished=o.data.wishlist,l(u.wished)}).catch(function(o){console.log(o),r.pop("error","Sorry","Please log in")})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Wishlist",["$http","$window",function(o,t){return{getWishes:function(){return o.get("/consumer/wishlist/")},postWishes:function(t){return o.post("/consumer/wishlist/",{product_id:t})}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("LoginController",["Account","$state","$rootScope",function(o,t,n){var r=this;n.isSignUp=!1,r.submit=function(){o.login({email:r.email,password:r.password}).then(function(r){console.log(r),console.log("islo",o.isLoggedIn),n.loggedIn=!0,t.go("home")}).catch(function(o){console.log(o),r.Message=o})}}])}(),function(){"use strict";angular.module("jivoxHack").controller("SignUpController",["Account","$state","$rootScope",function(o,t,n){var r=this;r.message="",r.enable=!1,n.isSignUp=!0,r.checkUserName=function(){o.getUserNames().then(function(o){if(o.data)if("[object Array]"===Object.prototype.toString.call(o.data.username)){var t=o.data.indexOf(r.email);t!==-1&&(r.message="You have already signed up....",r.enable=!1)}else r.message="",r.enable=!0;else r.enable=!0}).catch(function(o){console.log(o)})},r.submit=function(){console.log(r);var n={name:r.name,password:r.password,email:r.email};o.signUp(n).then(function(r){o.login({email:n.email,password:n.password}).then(function(){t.go("home")}).catch(function(o){console.log("During login!!"),console.log(o)})}).catch(function(o){console.log(o)})}}])}();