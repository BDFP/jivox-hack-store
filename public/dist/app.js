!function(){"use strict";angular.module("jivoxHack",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,o,n){o.otherwise("/home");var r="src/";t.state("account",{url:"/user",templateUrl:r+"user/account/account.tpl",controller:"AccountController as account"}).state("account.login",{url:"/user/login",templateUrl:r+"user/account/login/login.tpl",controller:"LoginController as login"}).state("account.signup",{url:"/user/signup",templateUrl:r+"user/account/signup/signup.tpl",controller:"SignUpController as signup"}).state("account.logout",{url:"/user",templateUrl:r+"user/account/account.tpl",controller:"AccountController as account"}).state("profile",{url:"/user/profile",templateUrl:r+"user/profile/profile.tpl",controller:"ProfileController as profile"}).state("wishlist",{url:"/user/wishlist",templateUrl:r+"user/wishlist/wishlist.tpl",controller:"WishlistController as wishlist"}).state("order",{url:"/user/order",templateUrl:r+"user/order/order.tpl",controller:"OrderController as order"}).state("cart",{url:"/user/cart",templateUrl:r+"user/cart/cart.tpl",controller:"CartController as cart"}).state("home",{url:"/home",templateUrl:r+"home/home.tpl",controller:"HomeController as home"}).state("products",{url:"/products",templateUrl:r+"products/products.tpl",controller:"ProductController as product"}).state("category",{url:"/category/:catId",templateUrl:r+"category/category.tpl",controller:"CategoryController as category"}),n.interceptors.push("authInterceptor")}])}(),function(){angular.module("jivoxHack").factory("authInterceptor",["$rootScope","$q","$window",function(t,o,n){return{request:function(t){return t.headers=t.headers||{},n.localStorage.getItem("token")&&(t.headers.Authorization=n.localStorage.getItem("token")),t},response:function(t){return 401===t.status,t||o.when(t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("CategoryController",["$stateParams","Category",function(t,o){function n(){e.min_val=Math.min.apply(Math,e.productList.map(function(t){return t.cost})),e.max_val=Math.max.apply(Math,e.productList.map(function(t){return t.cost})),e.sort_val="-cost",e.priceUp=function(){e.sort_val="-cost"},e.priceDown=function(){e.sort_val="cost"},e.rating=function(){e.sort_val="ratings"},e.filter_val="",e.rat1=!0,e.rat2=!0,e.rat3=!0,e.rat4=!0,e.rat5=!0,e.selRat=function(){return e.productList.product.rating>=1&&e.rat1||e.productList.product.rating>=2&&e.rat2||e.productList.product.rating>=3&&e.rat3||e.productList.product.rating>=4&&e.rat4||e.productList.product.rating>=5&&e.rat5},e.options={floor:e.min_val,ceil:e.max_val,step:1}}var r=t.catId;console.log("cat_id",r);var e=this;e.min_val="",e.max_val="",o.getCategoryProducts(r).then(function(t){console.log("Product list",t),e.productList=t.data.products,n()}).catch(function(t){console.log(t)})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Category",["$http","$window",function(t,o){return{getCategoryProducts:function(o){return t.get("/products/category/"+o)},getCategories:function(){return t.get("/category/")}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("HomeController",["$http","Home","$window","$state","Category","Wishlist","$rootScope",function(t,o,n,r,e,c,l){var a=this;a.catList=null,o.getCategories().then(function(t){console.log(t),a.catList=t.data.catgList}).catch(function(t){console.log("error:",t)}),a.times=function(t){return t},a.getCatProd=function(t){e.getCategoryProducts(t).then(function(t){return console.log(t),t.data.products}).catch(function(t){console.log(t)})},a.addToCart=function(t){n.localStorage.setItem("cart",t)},a.addToWishlist=function(t){c.postWishes().then(function(t){console.log(t)}).catch(function(t){console.log(t)})},a.search=function(){o.getSearch(a.query).then(function(t){a.productList=t.data.productList}).catch(function(t){console.log(t)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Home",["$http","$window",function(t,o){return{getCategories:function(){return t.get("/category")},getSearch:function(o){return t.post("/search",{search_query:o})}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProductController",["$window","$stateParams","Product",function(t,o,n){var r=this;r.addedToCart=[],r.curProductId=null,n.getProductDetails(curProductId).then(function(t){console.log(t),r.productDetails=t.data.product}).catch(function(t){console.log(t)}),r.addCart=function(){t.localStorage.setItem("cart",r.productDetails)},r.addWish=function(){n.addToWishlist(curProductId).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},r.addReview=function(){n.addRating(curProductId).then(function(t){console.log(t),n.getProductDetails(curProductId).then(function(t){console.log(t),r.productDetails=t.data.product}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})}}])}(),function(){"use strict";angular.module("jivoxHack").controller("AccountController",["Account","$state","$window","$rootScope",function(t,o,n,r){var e=this;r.loggedIn=t.isLoggedInFunc(),console.log(t.isloggedIn),e.logout=function(){t.logout(),e.loggedin=!1}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Account",["$http","$window",function(t,o){function n(o){return t.post("/users/signup",o)}function r(n){var r=this;return t.post("/users/login",n).then(function(t){return console.log(t),r.isLoggedIn=!0,u=t.data.token,i=t.data.id,o.localStorage.setItem("token",u),o.localStorage.setItem("user_id",i),console.log("isLoggedin",r.isLoggedIn),t}).catch(function(t){console.log(t)})}function e(){return g=!1,o.localStorage.clear()}function c(){return s()&&a()?(console.log("Logged in"),g=!0,!0):(console.log("no logged in"),g=!1,!1)}function l(){return t.get("/users")}function a(){return i=o.localStorage.getItem("user_id")}function s(){return u=o.localStorage.getItem("token")}var u=null,i=null,g=!1;return{signUp:n,login:r,getUserNames:l,getUserId:a,getToken:s,isLoggedIn:this.isLoggedIn,isLoggedInFunc:c,logout:e}}])}(),function(){"use strict";angular.module("jivoxHack").controller("CartController",["$window","Product","$stateParams",function(t,o,n){var r=this;r.productList=t.localStorage.getItem("cart")}])}(),function(){"use strict";angular.module("jivoxHack").controller("OrderController",["Order","$window","$stateParams",function(t,o,n){var r=this;r.allOrders=null,t.getOrders().then(function(t){console.log(t),r.allOrders=t.data.orders}).catch(function(t){console.log(t)})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Order",["$http","$window",function(t,o){return{getOrders:function(){return t.get("/consumer/orders/")},postOrder:function(o){return t.post("/consumer/orders/"+o)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProfileController",["$http","$window","$stateParam",function(t,o,n){var r=this;r.update=function(){Profile.postAddress(data).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Profile",["$http","$window",function(t,o){return{postAddress:function(o){return t.post("/consumer/address/"+o)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("WishlistController",["$http","$window","Wishlist","toaster",function(t,o,n,r){var e=this;n.getWishes().then(function(t){console.log(t),e.wished=t.data.wishlist}).catch(function(t){console.log(t),r.pop("error","Sorry","Please log in")})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Wishlist",["$http","$window",function(t,o){return{getWishes:function(){return t.get("/consumer/wishlist/")},postWishes:function(o){t.post("/consumer/wishlist/"+o)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("LoginController",["Account","$state","$rootScope",function(t,o,n){var r=this;n.isSignUp=!1,r.submit=function(){t.login({email:r.email,password:r.password}).then(function(r){console.log(r),console.log("islo",t.isLoggedIn),n.loggedIn=!0,o.go("home")}).catch(function(t){console.log(t),r.Message=t})}}])}(),function(){"use strict";angular.module("jivoxHack").controller("SignUpController",["Account","$state","$rootScope",function(t,o,n){var r=this;r.message="",r.enable=!1,n.isSignUp=!0,r.checkUserName=function(){t.getUserNames().then(function(t){if(t.data)if("[object Array]"===Object.prototype.toString.call(t.data.username)){var o=t.data.indexOf(r.email);o!==-1&&(r.message="You have already signed up....",r.enable=!1)}else r.message="",r.enable=!0;else r.enable=!0}).catch(function(t){console.log(t)})},r.submit=function(){console.log(r);var n={name:r.name,password:r.password,email:r.email};t.signUp(n).then(function(r){t.login({email:n.email,password:n.password}).then(function(){o.go("home")}).catch(function(t){console.log("During login!!"),console.log(t)})}).catch(function(t){console.log(t)})}}])}();