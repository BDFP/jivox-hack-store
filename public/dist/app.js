!function(){"use strict";angular.module("jivoxHack",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(o,t,e){t.otherwise("/home");var n="src/";o.state("account",{url:"/user",templateUrl:n+"user/account/account.tpl",controller:"AccountController as account"}).state("account.login",{url:"/user/login",templateUrl:n+"user/account/login/login.tpl",controller:"LoginController as login"}).state("account.signup",{url:"/user/signup",templateUrl:n+"user/account/signup/signup.tpl",controller:"SignUpController as signup"}).state("account.logout",{url:"/user",templateUrl:n+"user/account/account.tpl",controller:"AccountController as account"}).state("profile",{url:"/user/profile",templateUrl:n+"user/profile/profile.tpl",controller:"ProfileController as profile"}).state("wishlist",{url:"/user/wishlist",templateUrl:n+"user/wishlist/wishlist.tpl",controller:"WishlistController as wishlist"}).state("order",{url:"/user/order",templateUrl:n+"user/order/order.tpl",controller:"OrderController as order"}).state("cart",{url:"/user/cart",templateUrl:n+"user/cart/cart.tpl",controller:"CartController as cart"}).state("home",{url:"/home",templateUrl:n+"home/home.tpl",controller:"HomeController as home"}).state("products",{url:"/products",templateUrl:n+"products/products.tpl",controller:"ProductController as product"}),e.interceptors.push("authInterceptor")}])}(),function(){angular.module("jivoxHack").factory("authInterceptor",["$rootScope","$q","$window",function(o,t,e){return{request:function(o){return o.headers=o.headers||{},e.localStorage.getItem("token")&&(o.headers.Authorization=e.localStorage.getItem("token")),o},response:function(o){return 401===o.status,o||t.when(o)}}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Category",["$http","$window",function(o,t){return{getCategoryProducts:function(t){return o.get("/products/category/"+t)},getCategories:function(){return o.get("/category/")}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("HomeController",["$http","Home","$window","$stateParams","Category","Wishlist",function(o,t,e,n,r,c){var l=this;l.catList=null,t.getCategories().then(function(o){console.log(o),l.catList=o.data.catgList}).catch(function(o){console.log("error:",o)}),l.times=function(o){return o},l.getCatProd=function(o){r.getCategoryProducts(o).then(function(o){return console.log(o),o.data.products}).catch(function(o){console.log(o)})},l.addToCart=function(o){e.localStorage.setItem("cart",o)},l.addToWishlist=function(o){c.postWishes().then(function(o){console.log(o)}).catch(function(o){console.log(o)})},l.search=function(){t.getSearch(l.query).then(function(o){console.log(o)}).catch(function(o){console.log(o)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Home",["$http","$window",function(o,t){return{getCategories:function(){return o.get("/category")},getSearch:function(t){return o.post("/search",{search_query:t})}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProductController",["$window","$stateParams","Product",function(o,t,e){var n=this;n.addedToCart=[],n.curProductId=null,e.getProductDetails(curProductId).then(function(o){console.log(o),n.productDetails=o.data.product}).catch(function(o){console.log(o)}),n.addCart=function(){o.localStorage.setItem("cart",n.productDetails)},n.addWish=function(){e.addToWishlist(curProductId).then(function(o){console.log(o)}).catch(function(o){console.log(o)})},n.addReview=function(){e.addRating(curProductId).then(function(o){console.log(o),e.getProductDetails(curProductId).then(function(o){console.log(o),n.productDetails=o.data.product}).catch(function(o){console.log(o)})}).catch(function(o){console.log(o)})}}])}(),function(){"use strict";angular.module("jivoxHack").controller("AccountController",["Account","$state","$window","$rootScope",function(o,t,e,n){var r=this;n.loggedIn=o.isLoggedInFunc(),console.log(o.isloggedIn),r.logout=function(){o.logout(),r.loggedin=!1}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Account",["$http","$window",function(o,t){function e(t){return o.post("/users/signup",t)}function n(e){var n=this;return o.post("/users/login",e).then(function(o){return console.log(o),n.isLoggedIn=!0,a=o.data.token,i=o.data.id,t.localStorage.setItem("token",a),t.localStorage.setItem("user_id",i),console.log("isLoggedin",n.isLoggedIn),o}).catch(function(o){console.log(o)})}function r(){return g=!1,t.localStorage.clear()}function c(){return u()&&s()?(console.log("Logged in"),g=!0,!0):(console.log("no logged in"),g=!1,!1)}function l(){return o.get("/users")}function s(){return i=t.localStorage.getItem("user_id")}function u(){return a=t.localStorage.getItem("token")}var a=null,i=null,g=!1;return{signUp:e,login:n,getUserNames:l,getUserId:s,getToken:u,isLoggedIn:this.isLoggedIn,isLoggedInFunc:c,logout:r}}])}(),function(){"use strict";angular.module("jivoxHack").controller("CartController",["$window","Product","$stateParams",function(o,t,e){var n=this;n.productList=o.localStorage.getItem("cart")}])}(),function(){"use strict";angular.module("jivoxHack").controller("OrderController",["Order","$window","$stateParams",function(o,t,e){var n=this;n.allOrders=null,o.getOrders().then(function(o){console.log(o),n.allOrders=o.data.orders}).catch(function(o){console.log(o)})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Order",["$http","$window",function(o,t){return{getOrders:function(){return o.get("/consumer/orders/")},postOrder:function(t){return o.post("/consumer/orders/"+t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProfileController",["$http","$window","$stateParam",function(o,t,e){var n=this;n.update=function(){Profile.postAddress(data).then(function(o){console.log(o)}).catch(function(o){console.log(o)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Profile",["$http","$window",function(o,t){return{postAddress:function(t){return o.post("/consumer/address/"+t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("WishlistController",["$http","$window","Wishlist","toaster",function(o,t,e,n){var r=this;e.getWishes().then(function(o){console.log(o),r.wished=o.data.wishlist}).catch(function(o){console.log(o),n.pop("error","Sorry","Please log in")})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Wishlist",["$http","$window",function(o,t){return{getWishes:function(){return o.get("/consumer/wishlist/")},postWishes:function(t){o.post("/consumer/wishlist/"+t)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("LoginController",["Account","$state","$rootScope",function(o,t,e){var n=this;e.isSignUp=!1,n.submit=function(){o.login({email:n.email,password:n.password}).then(function(n){console.log(n),console.log("islo",o.isLoggedIn),e.loggedIn=!0,t.go("home")}).catch(function(o){console.log(o),n.Message=o})}}])}(),function(){"use strict";angular.module("jivoxHack").controller("SignUpController",["Account","$state","$rootScope",function(o,t,e){var n=this;n.message="",n.enable=!1,e.isSignUp=!0,n.checkUserName=function(){o.getUserNames().then(function(o){if(o.data)if("[object Array]"===Object.prototype.toString.call(o.data.username)){var t=o.data.indexOf(n.email);t!==-1&&(n.message="You have already signed up....",n.enable=!1)}else n.message="",n.enable=!0;else n.enable=!0}).catch(function(o){console.log(o)})},n.submit=function(){console.log(n);var e={name:n.name,password:n.password,email:n.email};o.signUp(e).then(function(n){o.login({email:e.email,password:e.password}).then(function(){t.go("home")}).catch(function(o){console.log("During login!!"),console.log(o)})}).catch(function(o){console.log(o)})}}])}();