!function(){"use strict";angular.module("jivoxHack",["ui.router","toaster","ngAnimate"]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(t,o,n){o.otherwise("/home");var e="src/";t.state("account",{url:"/user",templateUrl:e+"user/account/account.tpl",controller:"AccountController as account"}).state("account.login",{url:"/user/login",templateUrl:e+"user/account/login/login.tpl",controller:"LoginController as login"}).state("account.signup",{url:"/user/signup",templateUrl:e+"user/account/signup/signup.tpl",controller:"SignUpController as signup"}).state("account.logout",{url:"/user",templateUrl:e+"user/account/account.tpl",controller:"AccountController as account"}).state("profile",{url:"/user/profile",templateUrl:e+"user/profile/profile.tpl",controller:"ProfileController as profile"}).state("wishlist",{url:"/user/wishlist",templateUrl:e+"user/wishlist/wishlist.tpl",controller:"WishlistController as wishlist"}).state("order",{url:"/user/order",templateUrl:e+"user/order/order.tpl",controller:"OrderController as order"}).state("cart",{url:"/user/cart",templateUrl:e+"user/cart/cart.tpl",controller:"CartController as cart"}).state("home",{url:"/home",templateUrl:e+"home/home.tpl",controller:"HomeController as home"}).state("products",{url:"/products",templateUrl:e+"products/products.tpl",controller:"ProductController as product"}),n.interceptors.push("authInterceptor")}])}(),function(){angular.module("jivoxHack").factory("authInterceptor",["$rootScope","$q","$window",function(t,o,n){return{request:function(t){return t.headers=t.headers||{},n.localStorage.getItem("token")&&(t.headers.Authorization=n.localStorage.getItem("token")),t},response:function(t){return 401===t.status,t||o.when(t)}}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Category",["$http","$window",function(t,o){return{getCategoryProducts:function(o){return t.get("/products/category/"+o)},getCategories:function(){return t.get("/category/")}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("HomeController",["$http","Home","$window","$stateParams","Category","Wishlist","Cart",function(t,o,n,e,r,c,l){var u=this;u.catList=null,u.prodlist=[],o.getCategories().then(function(t){console.log(t),u.catList=t.data.catgList}).catch(function(t){console.log("error:",t)}),u.times=function(t){return new Array(t)},u.getCatProd=function(t){r.getCategoryProducts(t).then(function(t){return console.log(t),t.data.products}).catch(function(t){console.log(t)})},u.addToCart=function(t){l.addToCart(t)},u.addToWishlist=function(t){c.postWishes(t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})};for(var a=3;a>=0;a--)r.getCategoryProducts(a).then(function(t){console.log(t);for(var o=0;o<t.data.products.length;o++)u.prodlist.push(t.data.products[o])}).catch(function(t){console.log(t)})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Home",["$http","$window",function(t,o){return{getCategories:function(){return t.get("/category")}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProductController",["$window","$stateParams","Product",function(t,o,n){var e=this;e.addedToCart=[],e.curProductId=null,n.getProductDetails(curProductId).then(function(t){console.log(t),e.productDetails=t.data.product}).catch(function(t){console.log(t)}),e.addCart=function(){t.localStorage.setItem("cart",e.productDetails)},e.addWish=function(){n.addToWishlist(curProductId).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},e.addReview=function(){n.addRating(curProductId).then(function(t){console.log(t),n.getProductDetails(curProductId).then(function(t){console.log(t),e.productDetails=t.data.product}).catch(function(t){console.log(t)})}).catch(function(t){console.log(t)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Product",["$http","$window",function(t,o){return{getProductDetails:function(o){return t.get("/products/"+o)},addRating:function(o){return t.post("/consumer/rating/"+o)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("AccountController",["Account","$state","$window","$rootScope",function(t,o,n,e){var r=this;e.loggedIn=t.isLoggedInFunc(),console.log(t.isloggedIn),r.logout=function(){t.logout(),r.loggedin=!1}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Account",["$http","$window",function(t,o){function n(o){return t.post("/users/signup",o)}function e(n){var e=this;return t.post("/users/login",n).then(function(t){return console.log(t),e.isLoggedIn=!0,s=t.data.token,i=t.data.id,o.localStorage.setItem("token",s),o.localStorage.setItem("user_id",i),console.log("isLoggedin",e.isLoggedIn),t}).catch(function(t){console.log(t)})}function r(){return d=!1,o.localStorage.clear()}function c(){return a()&&u()?(console.log("Logged in"),d=!0,!0):(console.log("no logged in"),d=!1,!1)}function l(){return t.get("/users")}function u(){return i=o.localStorage.getItem("user_id")}function a(){return s=o.localStorage.getItem("token")}var s=null,i=null,d=!1;return{signUp:n,login:e,getUserNames:l,getUserId:u,getToken:a,isLoggedIn:this.isLoggedIn,isLoggedInFunc:c,logout:r}}])}(),function(){"use strict";angular.module("jivoxHack").controller("CartController",["$window","Product","$stateParams","Cart","Order",function(t,o,n,e,r){var c=this;c.prodlist=[];var l=e.getCart();console.log("prod id arr",l);var u=[],a=function(t){for(var n=t.length-1;n>=0;n--)o.getProductDetails(t[n]).then(function(t){console.log(t),c.prodlist.push(t.data.products),u.push({product_id:t.data.products.product_id,vendor_id:t.data.products.vendor_id})}).catch(function(t){console.log(t)})};c.order=function(){r.postOrder(u).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},console.log(c.prodlist),a(l)}])}(),function(){"use strict";angular.module("jivoxHack").factory("Cart",["$http","$window",function(t,o){return{addToCart:function(t){var n=o.localStorage.getItem("cart");n||(n=[]),n.push(t),o.localStorage.setItem("cart",JSON.stringify(n))},getCart:function(){return JSON.parse(o.localStorage.getItem("cart"))}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("OrderController",["Order","$window","$stateParams",function(t,o,n){var e=this;e.allOrders=null,t.getOrders().then(function(t){console.log(t),e.allOrders=t.data.orders}).catch(function(t){console.log(t)})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Order",["$http","$window",function(t,o){return{getOrders:function(){return t.get("/consumer/orders/")},postOrder:function(o){return t.post("/consumer/orders/",o)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("ProfileController",["$http","$window","$stateParam",function(t,o,n){var e=this;e.update=function(){Profile.postAddress(data).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}}])}(),function(){"use strict";angular.module("jivoxHack").factory("Profile",["$http","$window",function(t,o){return{postAddress:function(o){return t.post("/consumer/address/"+o)}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("WishlistController",["$http","$window","Wishlist","toaster","Product","Cart",function(t,o,n,e,r,c){function l(t){for(var o=t.length-1;o>=0;o--)r.getProductDetails(t[o].product_id).then(function(t){console.log(t),u.prodlist.push(t.data.products)}).catch(function(t){console.log(t)})}var u=this;u.prodlist=[],u.addToCart=function(t){c.addToCart(t).then(function(t){console.log(t)}).catch(function(t){console.log(t)})},n.getWishes().then(function(t){console.log(t),u.wished=t.data.wishlist,l(u.wished)}).catch(function(t){console.log(t),e.pop("error","Sorry","Please log in")})}])}(),function(){"use strict";angular.module("jivoxHack").factory("Wishlist",["$http","$window",function(t,o){return{getWishes:function(){return t.get("/consumer/wishlist/")},postWishes:function(o){return t.post("/consumer/wishlist/",{product_id:o})}}}])}(),function(){"use strict";angular.module("jivoxHack").controller("LoginController",["Account","$state","$rootScope",function(t,o,n){var e=this;n.isSignUp=!1,e.submit=function(){t.login({email:e.email,password:e.password}).then(function(e){console.log(e),console.log("islo",t.isLoggedIn),n.loggedIn=!0,o.go("home")}).catch(function(t){console.log(t),e.Message=t})}}])}(),function(){"use strict";angular.module("jivoxHack").controller("SignUpController",["Account","$state","$rootScope",function(t,o,n){var e=this;e.message="",e.enable=!1,n.isSignUp=!0,e.checkUserName=function(){t.getUserNames().then(function(t){if(t.data)if("[object Array]"===Object.prototype.toString.call(t.data.username)){var o=t.data.indexOf(e.email);o!==-1&&(e.message="You have already signed up....",e.enable=!1)}else e.message="",e.enable=!0;else e.enable=!0}).catch(function(t){console.log(t)})},e.submit=function(){console.log(e);var n={name:e.name,password:e.password,email:e.email};t.signUp(n).then(function(e){t.login({email:n.email,password:n.password}).then(function(){o.go("home")}).catch(function(t){console.log("During login!!"),console.log(t)})}).catch(function(t){console.log(t)})}}])}();